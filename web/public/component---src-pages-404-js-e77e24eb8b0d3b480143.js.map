{"version":3,"sources":["webpack:///./src/components/container.js","webpack:///./src/pages/404.js"],"names":["generateHotspot","coverPhoto","hotspot","x","Math","floor","y","Container","children","coverColor","coverPhotoHeight","fullWidth","location","useLocation","pageOrder","currentPage","pathname","direction","current","prev","diff","console","log","getDirection","indexOf","arr","str","index","findIndex","value","includes","fuzzyIndexOf","state","prevPath","animateFromSide","initial","abs","animate","exit","transition","type","duration","Root","className","color","asset","div","key","maxWidth","node","noCaption","styled","NotFoundPage","props","data","errors","title","site","headerImages"],"mappings":"8FAAA,+FA0FMA,EAAkB,SAAAC,GACtB,OAAKA,GAAeA,EAAWC,QAGxB,CACLC,EAAMC,KAAKC,MAA6B,IAAvBJ,EAAWC,QAAQC,GAAnC,IACDG,EAAMF,KAAKC,MAA6B,IAAvBJ,EAAWC,QAAQI,GAAnC,KAJM,CAAEH,EAAG,SAAUG,EAAG,WAQdC,IAtEG,SAAC,GAMZ,IALLC,EAKI,EALJA,SACAP,EAII,EAJJA,WAII,IAHJQ,kBAGI,MAHS,OAGT,OAFJC,iBAEI,EADJC,kBACI,SACEC,EAAWC,wBAEXC,EAAY,CAAC,IAAK,eAAgB,UAAW,WAAY,YAEzDC,EAAcH,EAASI,SAOvBC,EAxCa,SAACC,EAAaC,GACjC,QAD8C,IAA1BD,MAAU,QAAgB,IAAbC,MAAO,IACvB,IAAbD,EAAgB,OAAO,EAC3B,IAAME,EAAOF,EAAUC,EAGvB,OAFAE,QAAQC,IAAI,CAAEJ,UAASC,OAAMC,SAEzBA,EAAO,GAAW,EAClBA,EAAO,EAAU,EACd,EAiCWG,CANOT,EAAUU,QAAQT,GAxBxB,SAACU,EAAKC,GACzB,GAAY,MAARA,EAAa,OAAO,EAExB,IAAMC,EAAQF,EAAIG,WAAU,SAAAC,GAC1B,MAAc,MAAVA,IACJR,QAAQC,IAAI,CAAEO,QAAOH,MAAKI,SAAUJ,EAAII,SAASD,KAC1CH,EAAII,SAASD,OAItB,OADAR,QAAQC,IAAI,CAAEK,QAAOD,QACdC,EAkBeI,CAAajB,EAFjBF,EAASoB,OAASpB,EAASoB,MAAMC,UAAalB,IAO1DmB,EAAkB,CACtBC,QAAS,CAAEhC,EAAG,IAAOc,EAAWX,EAAG,IAAOF,KAAKgC,IAAIhC,KAAKgC,IAAInB,GAAa,IACzEoB,QAAS,CAAElC,EAAG,EAAGG,EAAG,GACpBgC,KAAM,CAAEnC,GAAI,IAAOc,EAAWX,GAAI,IAAOF,KAAKgC,IAAIhC,KAAKgC,IAAInB,GAAa,IACxEsB,WAAY,CAAEC,KAAM,SAAUC,SAAU,KASpCvC,EAAUF,EAAgBC,GAChC,OACE,kBAAC,IAAD,KACE,kBAACyC,EAAD,CAAMC,UAAW,OAAQzC,QAASA,EAAS0C,MAAOnC,EAAYE,UAAWA,GACtEV,GAAcA,EAAW4C,OACxB,kBAAC,IAAOC,IAAR,eACEH,UAAW,YACXI,IAAG,UAAYnC,EAASI,UAbX,CACrBmB,QAAS,CAAE7B,GAAI,KACf+B,QAAS,CAAE/B,EAAG,GACdgC,KAAM,CAAEhC,GAAI,KACZiC,WAAY,CAAEC,KAAM,SAAUC,SAAU,MAYhC,kBAAC,IAAD,CAAQO,SAAU,KAAMC,KAAMhD,EAAYiD,WAAS,EAACP,UAAU,oBAGhE1C,GAAc,yBAAK0C,UAAW,cAChC,kBAAC,IAAOG,IAAR,eACEH,UAAU,eACVI,IAAG,WAAanC,EAASI,UACrBkB,GAEH1B,MAmBX,IAAMkC,EAAOS,IAAOL,IAAV,qEAAGK,CAAH,svBAQO,qBAAGxC,UAA6B,OAAS,YAsB5C,oBAAGD,iBAAH,kBAAsB,IAAtB,WACiB,qBAAGkC,SAEhB,qBAAGA,SAUL,oBAAGlC,iBAAH,kBAAsB,IAAtB,WAUW,gBAAGR,EAAH,EAAGA,QAAH,OAAoBA,EAAQC,EAA5B,IAAiCD,EAAQI,M,kCC3JpE,oEAkCe8C,UAdM,SAAAC,GAAU,IACrBC,EAAiBD,EAAjBC,KAAiBD,EAAXE,OAEd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,mBACX,kBAAC,IAAD,CAAWvD,WAAYqD,EAAKG,KAAKC,aAAa,IAC5C,8CACA","file":"component---src-pages-404-js-e77e24eb8b0d3b480143.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { buildImageObj } from '../lib/helpers';\nimport { imageUrlFor } from '../lib/image-url';\nimport Figure from '../components/Figure';\nimport { useLocation } from '@reach/router';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nconst getDirection = (current = 0, prev = 0) => {\n  if (current === -1) return 0;\n  const diff = current - prev;\n  console.log({ current, prev, diff });\n\n  if (diff < 0) return -1;\n  if (diff > 0) return 1;\n  return 0;\n};\n\nconst fuzzyIndexOf = (arr, str) => {\n  if (str === '/') return 0;\n\n  const index = arr.findIndex(value => {\n    if (value === '/') return false;\n    console.log({ value, str, includes: str.includes(value) });\n    return str.includes(value);\n  });\n\n  console.log({ index, str });\n  return index;\n};\nconst Container = ({\n  children,\n  coverPhoto,\n  coverColor = '#1a1',\n  coverPhotoHeight = 400,\n  fullWidth = false\n}) => {\n  const location = useLocation();\n  // const location = typeof useLocation === 'function' ? useLocation() : { pathname: '/', state: {} };\n  const pageOrder = ['/', '/about-tsuki', '/family', '/gallery', '/contact'];\n\n  const currentPage = location.pathname;\n  const currentPageIndex = pageOrder.indexOf(currentPage);\n\n  const prevPage = (location.state && location.state.prevPath) || currentPage;\n  // const prevPageIndex = pageOrder.indexOf(prevPage);\n  const prevPageIndex = fuzzyIndexOf(pageOrder, prevPage);\n\n  const direction = getDirection(currentPageIndex, prevPageIndex);\n  // console.log({ location, direction, prevPage, currentPage });\n\n  const animateFromSide = {\n    initial: { x: 1000 * direction, y: 1000 * Math.abs(Math.abs(direction) - 1) },\n    animate: { x: 0, y: 0 },\n    exit: { x: -1000 * direction, y: -1000 * Math.abs(Math.abs(direction) - 1) },\n    transition: { type: 'spring', duration: 0.8 }\n  };\n\n  const animateFromTop = {\n    initial: { y: -1000 },\n    animate: { y: 0 },\n    exit: { y: -1000 },\n    transition: { type: 'spring', duration: 0.5 }\n  };\n  const hotspot = generateHotspot(coverPhoto);\n  return (\n    <AnimatePresence>\n      <Root className={'root'} hotspot={hotspot} color={coverColor} fullWidth={fullWidth}>\n        {coverPhoto && coverPhoto.asset && (\n          <motion.div\n            className={'mainImage'}\n            key={`header-${location.pathname}`}\n            {...animateFromTop}\n          >\n            <Figure maxWidth={1920} node={coverPhoto} noCaption className=\"img-container\" />\n          </motion.div>\n        )}\n        {!coverPhoto && <div className={'mainImage'}></div>}\n        <motion.div\n          className=\"page-content\"\n          key={`content-${location.pathname}`}\n          {...animateFromSide}\n        >\n          {children}\n        </motion.div>\n      </Root>\n    </AnimatePresence>\n  );\n};\n\nconst generateHotspot = coverPhoto => {\n  if (!coverPhoto || !coverPhoto.hotspot) {\n    return { x: 'center', y: 'center' };\n  }\n  return {\n    x: `${Math.floor(coverPhoto.hotspot.x * 100)}%`,\n    y: `${Math.floor(coverPhoto.hotspot.y * 100)}%`\n  };\n};\n\nexport default Container;\n\nconst Root = styled.div`\n  .page-content {\n    background: #efefef;\n    min-height: 100vh;\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    width: 100vw;\n    margin: 0 auto;\n    position: relative;\n    max-width: ${({ fullWidth }) => (fullWidth ? '100%' : '1200px')};\n    box-sizing: border-box;\n    padding: 1rem;\n    h1,\n    h2,\n    h3,\n    h4 {\n      margin: 0;\n      padding: 1rem 0;\n    }\n  }\n\n  .mainImage {\n    margin-top: -79px;\n    width: 100%;\n    background: black;\n    position: sticky;\n    top: calc(-400px + 79px);\n\n    z-index: 10;\n    left: 0%;\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    height: ${({ coverPhotoHeight = 400 }) => `${coverPhotoHeight}px`};\n    border-bottom: 1px solid ${({ color }) => color};\n    display: flex;\n    background: ${({ color }) => color};\n\n    image-rendering: pixelated;\n    /* filter: blur(3px) contrast(115%) brightness(100%); */\n    @media (max-width: 904px) {\n      top: calc(-400px + 67px);\n    }\n    figure {\n      width: 100%;\n      margin: 0 auto;\n      height: ${({ coverPhotoHeight = 400 }) => `${coverPhotoHeight}px`};\n      overflow: hidden;\n\n      .gatsby-image-wrapper {\n        width: 100%;\n        height: 100%;\n      }\n\n      img {\n        object-fit: cover;\n        object-position: ${({ hotspot }) => `${hotspot.x} ${hotspot.y}`} !important;\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n`;\n","import React from 'react';\n\nimport Layout from '../components/layout';\nimport SEO from '../components/seo';\nimport Container from '../components/container';\n\nexport const query = graphql`\n  query PageQuery404 {\n    site: sanitySiteSettings(_id: { regex: \"/(drafts.|)siteSettings/\" }) {\n      title\n      description\n      keywords\n      tagline\n      headerImages {\n        ...SanityImageFragment\n      }\n    }\n  }\n`;\n\nconst NotFoundPage = props => {\n  const { data, errors } = props;\n\n  return (\n    <Layout>\n      <SEO title=\"404: Not found\" />\n      <Container coverPhoto={data.site.headerImages[0]}>\n        <h1>Page not found</h1>\n        <p>I searched hard and couldn't find that page. ;n;</p>\n      </Container>\n    </Layout>\n  );\n};\n\nexport default NotFoundPage;\n"],"sourceRoot":""}